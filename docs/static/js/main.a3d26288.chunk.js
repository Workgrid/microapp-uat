(window["webpackJsonp@workgrid/microapp-edge-trials"]=window["webpackJsonp@workgrid/microapp-edge-trials"]||[]).push([[0],{236:function(e,t,n){},245:function(e,t,n){e.exports=n(550)},442:function(e,t,n){},447:function(e,t){},449:function(e,t){},488:function(e,t){},489:function(e,t){},545:function(e,t,n){},550:function(e,t,n){"use strict";n.r(t);n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(93),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(308),n(309),n(310),n(311),n(312),n(313),n(315),n(317),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(340),n(341),n(344),n(345),n(346),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(182),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(431),n(432),n(433),n(434),n(437),n(191);var a=n(1),c=n.n(a),r=n(238),i=n.n(r),o=(n(442),n(242)),l=n(49),u=n(109),s=n.n(u),m=n(239),p=n(240),f=n(87),d=n(241);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=[{name:"Token"},{name:"Title"},{name:"Show",inDetail:!1},{name:"Hide",inSummary:!1}],w=function(e){var t=e.microapp,n=e.panel,r=void 0===n?"summary":n,i=Object(a.useState)(b.map((function(e){return E({inSummary:!0,inDetail:!0,loading:!1,result:!1},e)}))),o=Object(f.a)(i,2),l=o[0],u=o[1],p=Object(a.useRef)({});Object(a.useEffect)((function(){return w()}),[t]),Object(a.useEffect)((function(){p.current.Token=w,p.current.Title=h,p.current.Show=O,p.current.Hide=v}));var g=function(e,t){u((function(n){return n.map((function(n){return n.name===e?E({},n,{},t):n}))}))},w=function(){t&&(g("Token",{loading:!0,result:!1}),setTimeout(Object(m.a)(s.a.mark((function e(){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getToken();case 2:n=e.sent,"edge-microapp"===(a=Object(d.decode)(n)).aud?g("Token",{loading:!1,result:!0}):(g("Token",{loading:!1,result:!1}),console.warn("Invalid token: ".concat(a.aud," !== ").concat("edge-microapp")));case 5:case"end":return e.stop()}}),e)}))),500))},h=function(){g("Title",{result:!1}),t.updateTitle("Title Change: ".concat(Math.floor(500*Math.random()))),g("Title",{result:!0})},O=function(){g("Show",{result:!1}),t.showDetail({url:"".concat(window.location.origin).concat(window.location.pathname,"#/tests")}),g("Show",{result:!0})},v=function(){g("Hide",{result:!1}),t.hideDetail(),g("Hide",{result:!0})};return c.a.createElement(c.a.Fragment,null,c.a.createElement("strong",null,"Tests:"),l.filter((function(e){return"summary"===r&&e.inSummary||"detail"===r&&e.inDetail})).map((function(e){return c.a.createElement("div",{className:"checklist",key:e.name},e.loading?c.a.createElement("span",{"aria-label":"loading",role:"img",className:"pass"},"\ud83e\udd14"):c.a.createElement(c.a.Fragment,null,e.result?c.a.createElement("span",{"aria-label":"pass",role:"img",className:"pass"},"\u2705"):c.a.createElement("span",{"aria-label":"fail",role:"img",className:"pass"},"\u274c")),c.a.createElement("div",{className:"item"},e.name),c.a.createElement("div",{className:"item"},c.a.createElement("button",{className:"action-small",onClick:(t=e.name,function(){p.current[t]()})},"Run")));var t})))},h=n(64),O=n.n(h),v=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"secondary",onClick:function(){return window.location.reload(!0)}},"Refresh"))},j=(n(545),function(){var e=Object(a.useRef)(new O.a({id:"edge-microapp-local",audience:"edge-microapp"}));Object(a.useEffect)((function(){console.log("Initialize"),e.current.initialize(),console.log("Post initialize")}),[]);var t=function(t){console.log("Showing detail"),e.current.showDetail({url:"".concat(window.location.origin).concat(window.location.pathname,"#/").concat(t),title:"Edge Microapp"})};return c.a.createElement("div",null,c.a.createElement("h1",null,"Edge Microapp"),c.a.createElement("p",null,'This is the "edgy" microapp.'),c.a.createElement("section",{className:"section"},c.a.createElement("input",{type:"text",placeholder:"Input Test"}),c.a.createElement(w,{microapp:e.current,panel:"summary"})),c.a.createElement("div",{className:"action-block vertical"},c.a.createElement(v,null),c.a.createElement("button",{className:"secondary",onClick:function(){return t("iframe")}},"Inner iFrame"),c.a.createElement("button",{className:"primary",onClick:function(){return t("tests")}},"Detail Tests")))}),y=(n(236),function(){var e=Object(a.useRef)(new O.a({id:"edge-microapp",audience:"edge-microapp"})),t=Object(a.useState)(5),n=Object(f.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(""),l=Object(f.a)(o,2),u=l[0],s=l[1],m=Object(a.useRef)();return Object(a.useEffect)((function(){console.log("Initializing Detail"),e.current.initialize(),m.current=setInterval((function(){i((function(e){return console.log(e%2?"Tick":"Tock"),e-1}))}),1e3)}),[]),Object(a.useEffect)((function(){r<=0&&(s("https://www.catapultsgame.com/app/"),clearInterval(m.current))}),[r]),c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,"IFrame Detail"),c.a.createElement("p",null,'Tests an inner iFrame. This is a typical use case for "wrapping" an existing app in a MicroApp.'),c.a.createElement("div",{className:"example-block"},c.a.createElement("p",null,"Showing iFrame in ",r,"s"),c.a.createElement("iframe",{style:{width:"100%",borderWidth:1},title:"Example Iframe",src:u})))}),k=function(){var e=Object(a.useRef)(new O.a({id:"edge-microapp",audience:"edge-microapp"}));return Object(a.useEffect)((function(){console.log("Initializing Detail"),e.current.initialize()}),[]),c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,"Tests Detail"),c.a.createElement("div",{className:"example-block"},c.a.createElement(w,{microapp:e.current,panel:"detail"})),c.a.createElement("div",{className:"action-block"},c.a.createElement(v,null)))},T=function(){return c.a.createElement(o.a,{basename:window.location.pathname},c.a.createElement(l.a,{path:"/",exact:!0,component:j}),c.a.createElement(l.a,{path:"/tests",component:k}),c.a.createElement(l.a,{path:"/iframe",component:y}))};i.a.render(c.a.createElement(T,null),document.getElementById("root"))}},[[245,1,2]]]);
//# sourceMappingURL=main.a3d26288.chunk.js.map